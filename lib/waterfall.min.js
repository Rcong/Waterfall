var waterfall=function(t){function n(t){for(var n=Math.min.apply(Math,t),i=0,o=t.length;o>i;i++)n===t[i]&&(a=i);return n}function i(t){return Math.max.apply(Math,t)}function o(){var n=parseInt(e.css("height").replace("px","")),i=t(window).scrollTop(),o=t(window).height();return i+o>=n}var e=null,a=0,r=[],c=null;return{init:function(t){e=t,this.bind()},bind:function(){var n=this;t(window).on("resize",function(){n.layout()});var i=null;t(window).on("scroll",function(){i&&clearTimeout(i),i=setTimeout(function(){o()&&c&&c()},100)})},touchBottom:function(t){c=t},render:function(n){if(n.data&&n.content&&n.desc){for(var i,o="",a=n.data,r=[],c=0,u=n.data.length;u>c;c++)o+='<div class="item">',o+='<a href="'+a[c][n.content]+'">',o+='<img src="'+a[c][n.content]+'" width="236">',o+="</a>",o+='<p class="description">'+a[c][n.desc]+"</p>",o+="</div>";i=t(o),e.append(i),i.each(function(){var n=t.Deferred();t(this).find("img").on("load",function(){n.resolve()}),r.push(n)});var h=this;t.when.apply(null,r).done(function(){h.layout(i)})}},layout:function(o){o||(o=t(".item"),r=[]);var c=o.outerWidth(!0),u=parseInt(e.width()/c),h=(e.width()-c*u)/(u-1);if(0===r.length)for(var l=0;u>l;l++)r.push(0);o.each(function(){t(this).css({top:n(r),left:a*(c+h),opacity:1}),r[a]+=t(this).height()+h,e.css("height",i(r))})}}}($);